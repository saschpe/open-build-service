<div id="dialog_wrapper">
  <div class="dialog" id="disable_mask"></div>
  <div class="dialog darkgrey_box" id="add_service">
    <div class="box box-shadow">
      <div class="box-header aligncenter">
        <b>Add a Source Service</b>
      </div>

      <% form_tag({:controller => "package", :action => "add_service"}, :method => "post") do %>
        <%= hidden_field_tag(:project, @project) %>
        <%= hidden_field_tag(:package, @package) %>
        <p>
          <%= label_tag(:service, "Select service:") %><br/>
          <%= select_tag(:service, options_for_select(Service.available.map({|service| service[:name]}))) %><br/>
          <%= label_tag(:description, "Description:") %><br/>

          <% Service.available.each do |service| %>
            <% object_id = "new_service_#{service[:name]}" %>
            <div class="show_left" id="<%= object_id %>" onclick="window.location = '<%= url_for :action => :add_or_move_service, :id => object_id, :position => -1, :package => @package, :project => @project %>'" >
              <a name="<%= service[:name] %>"><%= service[:summary] %></a>
              <div style="color: #999; font-size: 8pt"><%= service[:name] %></div>
            </div>
          <% end %>
        </p>
        <div class="buttons">
          <%= submit_tag("Ok") %>
          <%= link_to_function("Cancel", "remove_dialog()") %>
        </div>
      <% end %>
    </div>
  </div>
</div>
